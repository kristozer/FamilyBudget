(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(29),a=n.n(i),c=n(17),s=n.n(c),o=n(21),u=n(42),d=n(52),l=n(87),p=n(86),j=n(23),b=n(177),f=n(160),h=n(169),x=n(171),O=n(2),v=function(){return Object(O.jsx)(h.a,{position:"static",children:Object(O.jsx)(x.a,{})})},m=n(168),g=n(178),y=n(14),S=n(170),w=n(176),k=n(174),P=n(159),I=n(158),C=n(155),E=n(161),T=n(166),z=n(172),D=n(164),V=n(175),A=n(173),B=n(84),M=n.n(B),F=Object(j.b)("store")(Object(j.c)((function(e){var t=e.store,n=e.periodId,i=e.incomes,a=Object(r.useState)(""),c=Object(y.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(""),d=Object(y.a)(u,2),l=d[0],p=d[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z.a,{children:i.map((function(e){return Object(O.jsxs)(D.a,{button:!0,children:[Object(O.jsx)(A.a,{primary:e.name}),Object(O.jsx)(A.a,{primary:e.value}),Object(O.jsx)(V.a,{onClick:function(){return t.deletePeriodIncome(n,e.id)},children:Object(O.jsx)(M.a,{})})]},e.id)}))}),Object(O.jsxs)(C.a,{spacing:1,alignItems:"center",children:[Object(O.jsx)(E.a,{label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",variant:"standard",value:s,onChange:function(e){return o(e.target.value)}}),Object(O.jsx)(E.a,{label:"\u0421\u0443\u043c\u043c\u0430",variant:"standard",value:l,onChange:function(e){return p(parseInt(e.target.value))}}),Object(O.jsx)(T.a,{variant:"contained",onClick:function(){t.addPeriodIncome({periodId:n,name:s,value:l||0}),o(""),p("")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})}))),J=n(73),q=n(167),G={margin:{marginTop:"5px"}};function L(e,t,n){return Object(O.jsx)(q.a,{anchor:"left",open:n,onClose:function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&t()},children:Object(O.jsx)(w.a,{style:G.margin,sx:{width:250},role:"presentation",children:e})})}var R=function(e){var t=e.expenditure,n=e.onChange,i=e.onDelete,a=Object(r.useState)(t.name||""),c=Object(y.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(t.plannedToSpendValue||""),d=Object(y.a)(u,2),l=d[0],p=d[1],j=Object(r.useState)(t.spentValue||""),b=Object(y.a)(j,2),f=b[0],h=b[1];return Object(O.jsxs)(C.a,{spacing:1,alignItems:"center",children:[Object(O.jsx)(E.a,{label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",variant:"standard",value:s,onChange:function(e){return o(e.target.value)}}),Object(O.jsx)(E.a,{label:"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e",variant:"standard",value:l,onChange:function(e){return p(parseInt(e.target.value))}}),Object(O.jsx)(E.a,{label:"\u041f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043e",variant:"standard",value:f,onChange:function(e){return h(parseInt(e.target.value))}}),Object(O.jsx)(T.a,{variant:"contained",onClick:function(){n({id:t.id,name:s,plannedToSpendValue:l||0,spentValue:f||0})},children:0===t.id?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(O.jsx)(T.a,{variant:"contained",onClick:function(){return i(t.id)},disabled:0===t.id,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})},N={boldMarginText:{fontWeight:"bold",marginRight:"5px"},marginText:{marginRight:"5px"}},W=Object(j.b)("store")(Object(j.c)((function(e){var t=e.store,n=e.periodId,i=e.data,a=Object(r.useState)(!1),c=Object(y.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)({}),d=Object(y.a)(u,2),l=d[0],p=d[1],j=function(e){p(e),o(!0)},f=function(){o(!1)};if(!i)return Object(O.jsx)("div",{});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(C.a,{spacing:.5,children:[i.map((function(e,t){var n=t+1;return Object(O.jsxs)("div",{children:[Object(O.jsx)(k.a,{variant:"subtitle1",display:"inline",children:"".concat(n,". ").concat(e.name)}),Object(O.jsxs)(w.a,{children:[Object(O.jsx)(k.a,{variant:"subtitle1",display:"inline",fontSize:"small",style:N.marginText,children:"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e:"}),Object(O.jsx)(k.a,{variant:"subtitle1",display:"inline",fontSize:"small",style:N.boldMarginText,children:e.plannedToSpendValue}),Object(O.jsx)(k.a,{variant:"subtitle1",display:"inline",fontSize:"small",style:N.marginText,children:"\u041f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043e:"}),Object(O.jsx)(k.a,{variant:"subtitle1",display:"inline",fontSize:"small",style:N.boldMarginText,children:e.spentValue}),Object(O.jsx)(b.a,{"aria-label":"edit",color:"primary",size:"small",component:"span",onClick:function(){return j(e)},children:Object(O.jsx)(I.a,{fontSize:"small"})})]})]},e.id)})),Object(O.jsxs)(k.a,{variant:"subtitle1",display:"inline",children:["\u041e\u0431\u0449\u0438\u0439 \u0440\u0430\u0441\u0445\u043e\u0434: ",i.reduce((function(e,t){return e+t.spentValue}),0)]}),Object(O.jsx)(T.a,{variant:"contained",onClick:function(){return j({id:0})},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u0445\u043e\u0434"})]}),L(Object(O.jsx)(R,{expenditure:l,onChange:function(e){t.changeExpenditure(Object(J.a)(Object(J.a)({},e),{},{periodId:n})),f()},onDelete:function(e){t.deleteExpenditure(n,e),f()}}),f,s)]})}))),Y={paper:{margin:"12px 5px",padding:"5px",display:"inline-block",whiteSpace:"nowrap",position:"relative"}},H=Object(j.b)("store")(Object(j.c)((function(e){var t=e.data,n=t.id,i=t.periodBegin,a=t.periodEnd,c=t.incomes,s=t.expenditures,o=e.store,u=Object(r.useState)(!1),d=Object(y.a)(u,2),l=d[0],p=d[1],j=function(e){var t=new Date(e);return t.getDate().toString().padStart(2,"0")+"."+(t.getMonth()+1).toString().padStart(2,"0")+"."+t.getFullYear()},f=c.reduce((function(e,t){return e+t.value}),0),h=function(){p(!l)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(S.a,{style:Y.paper,elevation:3,children:[Object(O.jsx)(b.a,{"aria-label":"edit",color:"primary",size:"small",component:"span",onClick:function(){return o.deletePeriod(n)},style:{position:"absolute",right:"-10px",top:"0"},children:Object(O.jsx)(P.a,{fontSize:"small"})}),Object(O.jsxs)(w.a,{children:[Object(O.jsxs)(k.a,{variant:"subtitle1",display:"inline",children:["\u041f\u0435\u0440\u0438\u043e\u0434: ",j(i)]}),Object(O.jsx)(k.a,{variant:"subtitle1",display:"inline",children:" - "}),Object(O.jsx)(k.a,{variant:"subtitle1",display:"inline",children:j(a)})]}),Object(O.jsxs)(w.a,{children:[Object(O.jsxs)(k.a,{variant:"subtitle1",display:"inline",children:["\u0414\u043e\u0445\u043e\u0434: ",f]}),Object(O.jsx)(b.a,{"aria-label":"edit",color:"primary",size:"small",component:"span",onClick:h,children:Object(O.jsx)(I.a,{fontSize:"small"})})]}),Object(O.jsx)(W,{periodId:n,data:s})]}),L(Object(O.jsx)(F,{periodId:n,incomes:c}),h,l)]})}))),K=Object(j.b)("store")(Object(j.c)((function(e){var t=e.store,n=t.periods,r=12/n.length,i=n.map((function(e){return Object(O.jsx)(m.a,{item:!0,xs:12,sm:r,children:Object(O.jsx)(H,{data:e})},e.id)}));return t.showPeriods?Object(O.jsx)(m.a,{container:!0,children:i}):Object(O.jsx)(g.a,{})}))),Q=n(13);function U(e){return fetch(e).then(Z)}function X(e,t){var n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)};return fetch(e,n).then(Z)}function Z(e){return function(e){var t,n=(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.get("Content-Type"))||"";return n.includes("application/json")||n.includes("application/x-javascript")}(e)?e.json():Promise.resolve()}function $(e){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X("BudgetPeriods/SavePeriod",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return X("BudgetPeriods/DeletePeriod?id=".concat(e))}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X("Incomes/SaveIncome",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return U("Incomes/Get?periodId=".concat(e))}function ie(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X("Expenditures/SaveExpenditure",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return U("Expenditures/Get?periodId=".concat(e))}function se(e){return X("Expenditures/DeleteExpenditure?id=".concat(e))}var oe=function e(){var t=this;Object(u.a)(this,e),this.periods=[],this.showPeriods=!1,this.fillPeriods=Object(o.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("budgetperiods");case 2:n=e.sent,Object(Q.o)((function(){t.periods=n,t.showPeriods=!0}));case 4:case"end":return e.stop()}}),e)}))),this.changePeriod=function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(n);case 2:return e.next=4,t.fillPeriods();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deletePeriod=function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(n);case 2:return e.next=4,t.fillPeriods();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deletePeriodIncome=function(){var e=Object(o.a)(s.a.mark((function e(n,r){var i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t.periods.find((function(e){return e.id===n})))){e.next=8;break}return e.next=4,X("Incomes/DeleteIncome?id=".concat(r));case 4:return e.next=6,re(n);case 6:a=e.sent,Object(Q.o)((function(){i.incomes=a}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.addPeriodIncome=function(){var e=Object(o.a)(s.a.mark((function e(n){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.periods.find((function(e){return e.id===n.periodId})))){e.next=8;break}return e.next=4,te(n);case 4:return e.next=6,re(n.periodId);case 6:i=e.sent,Object(Q.o)((function(){r.incomes=i}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.changeExpenditure=function(){var e=Object(o.a)(s.a.mark((function e(n){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.periods.find((function(e){return e.id===n.periodId})))){e.next=8;break}return e.next=4,ie(n);case 4:return e.next=6,ce(r.id);case 6:i=e.sent,Object(Q.o)((function(){r.expenditures=i}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteExpenditure=function(){var e=Object(o.a)(s.a.mark((function e(n,r){var i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t.periods.find((function(e){return e.id===n})))){e.next=8;break}return e.next=4,se(r);case 4:return e.next=6,ce(n);case 6:a=e.sent,Object(Q.o)((function(){i.expenditures=a}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Object(Q.m)(this,{periods:Q.n,showPeriods:Q.n,fillPeriods:Q.f,changePeriod:Q.f,deletePeriodIncome:Q.f,addPeriodIncome:Q.f,changeExpenditure:Q.f,deleteExpenditure:Q.f})},ue=function(e){var t=e.store,n=e.onAdd,i=(new Date).toISOString().slice(0,10),a=Object(r.useState)(i),c=Object(y.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(i),d=Object(y.a)(u,2),l=d[0],p=d[1];return Object(O.jsxs)(C.a,{spacing:1,alignItems:"center",children:[Object(O.jsx)(E.a,{label:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",variant:"standard",type:"date",value:s,InputLabelProps:{shrink:!0,required:!0},onChange:function(e){return o(e.target.value)}}),Object(O.jsx)(E.a,{label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",variant:"standard",type:"date",value:l,InputLabelProps:{shrink:!0,required:!0},onChange:function(e){return p(e.target.value)}}),Object(O.jsx)(T.a,{variant:"contained",onClick:function(){t.changePeriod({id:0,periodBegin:new Date(s),periodEnd:new Date(l),incomes:[],expenditures:[]}),n()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0438\u043e\u0434"})]})},de=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).closePeriodAdd=function(){return r.setState({isAddPeriodVisible:!1})},r.periodsStore=new oe,r.state={isAddPeriodVisible:!1},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.periodsStore.fillPeriods();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsx)(j.a,{store:this.periodsStore,children:Object(O.jsxs)("div",{children:[Object(O.jsx)(v,{}),Object(O.jsx)(K,{}),Object(O.jsx)(b.a,{size:"large",edge:"start",color:"primary","aria-label":"addCircle",style:{position:"absolute",right:"0",bottom:"0"},onClick:function(){return e.setState({isAddPeriodVisible:!0})},children:Object(O.jsx)(f.a,{})}),L(Object(O.jsx)(ue,{store:this.periodsStore,onAdd:this.closePeriodAdd}),this.closePeriodAdd,this.state.isAddPeriodVisible)]})})}}]),n}(r.Component),le=de,pe=(n(112),document.getElementById("root"));a.a.render(Object(O.jsx)(le,{}),pe)}},[[113,1,2]]]);
//# sourceMappingURL=main.44922528.chunk.js.map